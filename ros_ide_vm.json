{
  "variables": {
    "user": "clever",
    "password": "clever",
    "vm-name": "clever-devel",
    "scriptsDir": "scripts",
    "assetsDir": "assets"
  },
  "builders": [{
    "type": "virtualbox-ovf",
    "vm_name": "{{user `vm-name`}}",
    "source_path": "output-virtualbox-iso/{{user `vm-name`}}.ova",
    "format": "ova",
    "guest_additions_mode": "disable",

    "vboxmanage": [
      ["modifyvm", "{{.Name}}", "--memory", "8192", "--vram", "128", "--mouse", "usbtablet", "--rtcuseutc", "on", "--usb", "on", "--usbxhci", "on"],
      ["storageattach", "{{.Name}}", "--storagectl", "SATA Controller", "--port", "0", "--nonrotational", "on", "--discard", "on"]
    ],
    "import_opts": "importtovdi",

    "ssh_username": "{{user `user`}}",
    "ssh_password": "{{user `password`}}",
    "ssh_wait_timeout": "10000s",

    "boot_wait": "30s",

    "virtualbox_version_file": ".vbox_version",

    "shutdown_command": "echo '{{user `password`}}' | sudo -S shutdown -P now",
    "vboxmanage_post": [
      ["modifyvm", "{{.Name}}", "--memory", "2048"]
    ]
  }],
  "provisioners": [{
    "type": "file",
    "source": "{{user `assetsDir`}}/background/",
    "destination": "/home/clever/Pictures"
  },
  {
    "type": "file",
    "source": "{{user `assetsDir`}}/pictures/",
    "destination": "/home/clever/Pictures"
  },
  {
    "type": "file",
    "source": "{{user `assetsDir`}}/desktop/",
    "destination": "/home/clever/Desktop"
  },
  {
    "type": "shell",
    "script": "scripts/installSoftware.sh",
    "execute_command": "PASSWORD='{{user `password`}}' bash '{{.Path}}'"
  },
  {
    "type": "file",
    "source": "{{user `assetsDir`}}/vscode/",
    "destination": "/home/clever/.config/Code/User/"
  }]
}